!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=(0,wp.element.createContext)({});function a(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=wp.element,b=(u.createElement,u.useState),d=u.useEffect,p=u.Fragment,f=(u.render,u.useRef),w=wp.data,v=(w.dispatch,w.select),y=function(e){var t=c(b(""),2),n=t[0],r=t[1];return d((function(){var t="",n="",a={};switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"group":n="group",t=e.id.id,a={item_id:e.id.id};break;case"activity":n="user",t=e.id.secondary_item_id;break;case"user":n="user",t=e.id.user_id;break;case"shared":n="user",t=e.id.id,a={user_id:e.id.id};break;case"course":n="course",t=e.id.id,a={item_id:e.id.id};break;default:n=e.type,t=e.id.id}localforage.getItem(n+"_"+t).then((function(t){null!==t?r(JSON.parse(t)):fetch("".concat(window.vibebp.api.url,"/avatar"),{method:"post",body:JSON.stringify({type:n,ids:a,token:v("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(t.status){var n=l(l({},t.value),{},{id:e.id.id});localforage.setItem(t.key,JSON.stringify(n)),r(n)}}))}))}),[e.id]),wp.element.createElement(p,null,e.not_show_name?wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}):wp.element.createElement("span",null,wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)))},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=f(Date.now());d((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(a(n)))};function h(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=wp.element,A=(k.createElement,k.useState),P=k.useEffect,C=(k.Fragment,k.render,k.useContext),I=wp.data,x=I.dispatch,D=I.select,T=function(e){var t=C(r),n=j(A(!1),2),a=n[0],i=n[1],l=j(A({id:0,post_title:"",post_content:"",meta:{"bbb-room-viewer-code":"","bbb-room-moderator-code":"",logoutUrl:window.vibebbb.settings.logout_redirect_url,start:"",duration:5,duration_value:60,"bbb-room-recordable":"false","bbb-room-wait-for-moderator":"false",show_recordings:!1},shared:{shared_type:"shared",shared_values:[]}}),2),o=l[0],c=l[1],s=j(A(""),2),m=s[0],u=s[1],b=j(A([]),2),d=b[0],p=b[1];P((function(){var t=E(E({},o),e.meeting);e.meeting.hasOwnProperty("meta")&&e.meeting.meta?t.meta=E(E({},o.meta),e.meeting.meta):t.meta=E({},o.meta),c(t)}),[e.meeting]),g((function(){if(p([]),m.length>2&&o.shared.shared_type){var e={s:m,shared_type:o.shared.shared_type};fetch("".concat(window.vibebbb.api.url,"/search?nocache"),{method:"post",body:JSON.stringify(E(E({},e),{},{token:D("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){e.status&&e.values&&Array.isArray(e.values)&&p(e.values)}))}}),500,[m]);return wp.element.createElement("div",{className:"new_bbb_meeting"},wp.element.createElement("div",{className:"new_meeting_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back})),wp.element.createElement("div",{className:"new_meeting_content vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field meeting_title"},wp.element.createElement("label",null,window.vibebbb.translations.meeting_title),wp.element.createElement("input",{type:"text",value:o.post_title,onChange:function(e){c(E(E({},o),{},{post_title:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field meeting_content"},wp.element.createElement("label",null,window.vibebbb.translations.meeting_content),wp.element.createElement("div",{className:"vibe_meeting_editor"},wp.element.createElement("textarea",{onChange:function(e){c(E(E({},o),{},{post_content:e.target.value}))},value:o.post_content}))),wp.element.createElement("div",{className:"vibebp_form_field meeting_start_time"},wp.element.createElement("label",null,window.vibebbb.translations.meeting_start_time),wp.element.createElement("input",{type:"text",ref:function(e){e&&flatpickr(e,{altInput:!0,defaultDate:o.meta.start,enableTime:!0,onChange:function(e,t,n){var r=E({},o);r.meta.start=new Date(t).getTime(),c(r)}})}})),wp.element.createElement("div",{className:"vibebp_form_field duration"},wp.element.createElement("label",null,window.vibebbb.translations.duration),wp.element.createElement("input",{type:"text",value:o.meta.duration,onChange:function(e){var t=E({},o);t.meta.duration=e.target.value,c(t)}})),window.vibebbb.settings.duration_values?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebbb.translations.select_duration_value),wp.element.createElement("select",{value:o.meta.duration_value,onChange:function(e){var t=E({},o);t.meta.duration_value=e.target.value,c(t)}},window.vibebbb.settings.duration_values.map((function(e,t){return wp.element.createElement("option",{value:e.value},e.label)})))):"",wp.element.createElement("div",{className:"vibebp_form_field bbb-room-moderator-code"},wp.element.createElement("label",null,window.vibebbb.translations.moderator_password),wp.element.createElement("input",{type:"text",value:o.meta["bbb-room-moderator-code"],onChange:function(e){var t=E({},o);t.meta["bbb-room-moderator-code"]=e.target.value,c(t)}})),wp.element.createElement("div",{className:"vibebp_form_field bbb-room-viewer-code"},wp.element.createElement("label",null,window.vibebbb.translations.attendee_password),wp.element.createElement("input",{type:"text",value:o.meta["bbb-room-viewer-code"],onChange:function(e){var t=E({},o);t.meta["bbb-room-viewer-code"]=e.target.value,c(t)}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebbb.translations.logout_redirect_url),wp.element.createElement("input",{type:"text",value:o.meta.logoutUrl,onChange:function(e){var t=E({},o);t.meta.logoutUrl=e.target.value,c(t)}})),wp.element.createElement("div",{className:"vibebp_form_field bbb-room-recordable"},wp.element.createElement("label",null,window.vibebbb.translations.recordable),wp.element.createElement("div",{className:"switch"},"true"==o.meta["bbb-room-recordable"]?wp.element.createElement("input",{type:"checkbox",id:"bbb-room-recordable",checked:!0,onClick:function(){var e=E({},o);e.meta["bbb-room-recordable"]="false",c(e)}}):wp.element.createElement("input",{type:"checkbox",id:"bbb-room-recordable",onClick:function(){var e=E({},o);e.meta["bbb-room-recordable"]="true",c(e)}}),wp.element.createElement("label",{for:"bbb-room-recordable",className:"slider"}))),wp.element.createElement("div",{className:"vibebp_form_field show_recordings"},wp.element.createElement("label",null,window.vibebbb.translations.show_recordings_to_user),wp.element.createElement("div",{className:"switch"},o.meta.show_recordings?wp.element.createElement("input",{type:"checkbox",id:"show_recordings",checked:!0,onClick:function(){var e=E({},o);e.meta.show_recordings=!e.meta.show_recordings,c(e)}}):wp.element.createElement("input",{type:"checkbox",id:"show_recordings",onClick:function(){var e=E({},o);e.meta.show_recordings=!e.meta.show_recordings,c(e)}}),wp.element.createElement("label",{for:"show_recordings",className:"slider"}))),o.shared?wp.element.createElement("div",{className:"shared"},wp.element.createElement("div",{className:"vibebp_form_field select_sharing_type"},wp.element.createElement("label",null,window.vibebbb.translations.select_sharing_type),wp.element.createElement("select",{value:o.shared.shared_type,onChange:function(e){var t=E({},o);t.shared.shared_type=e.target.value,t.shared.shared_values=[],c(t)}},wp.element.createElement("option",{value:""},window.vibebbb.translations.select_sharing_type),Object.keys(window.vibebbb.shared_types).map((function(e){return wp.element.createElement("option",{value:e},window.vibebbb.shared_types[e])})))),o.shared.shared_type?wp.element.createElement("div",null,o.shared.shared_values&&Array.isArray(o.shared.shared_values)&&o.shared.shared_values.length?wp.element.createElement("div",{className:"vibebp_form_field shared_values"},wp.element.createElement("label",null,window.vibebbb.translations.shared_with),wp.element.createElement("div",{className:"shared_values"},wp.element.createElement("div",{className:"_all"},o.shared.shared_values.map((function(e){return wp.element.createElement("div",{className:"vibebp_meeting_members",onClick:function(){var t=E({},o);t.shared.shared_values.indexOf(e)>-1&&(t.shared.shared_values.splice(t.shared.shared_values.indexOf(e),1),c(t))}},wp.element.createElement(y,{type:o.shared.shared_type,id:{id:e}}))}))))):"",wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:m,onChange:function(e){u(e.target.value)},placeholder:window.vibebbb.translations.search_text})),Array.isArray(d)&&d.length?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"vsearch_results"},wp.element.createElement("div",{className:"_all"},d.map((function(e,t){return wp.element.createElement("div",{className:Array.isArray(o.shared.shared_values)&&o.shared.shared_values.length&&o.shared.shared_values.indexOf(e.id)>=0?"vibebp_meeting_members faded":"vibebp_meeting_members",onClick:function(){var n=E({},o);if(-1==n.shared.shared_values.indexOf(e.id)){n.shared.shared_values.push(e.id);var r=h(d);r.splice(t,1),p(r)}c(n)}},wp.element.createElement("span",null,e.label))}))))):""):""):"",wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("a",{className:a?"button is-primary is-loading":"button is-primary",onClick:function(){i(!0);var n="?post&args=".concat(encodeURIComponent(JSON.stringify(E({},o))));fetch("".concat(window.vibebbb.api.url,"/user/meetings/new").concat(n),{method:"post",body:JSON.stringify(E(E({},o),{},{token:D("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(n){n.status&&t.update(!0,"forceReload"),i(!1),n.status&&e.created(n.meeting),n.hasOwnProperty("message")&&x("vibebp").addNotification({text:n.message})}))}},window.vibebbb.translations.submit))))};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=wp.element,F=R.useState,$=R.useEffect,q=R.Fragment,B=(R.useContext,wp.data),H=B.dispatch,z=B.select,G=function(e){var t=L(F(!1),2),n=t[0],r=t[1],a=L(F(e.meeting),2),i=a[0],l=a[1],o=L(F(!1),2),c=o[0],s=o[1];$((function(){l(e.meeting)}),[e.meeting]);var m=function(){s(!0),fetch("".concat(window.vibebbb.api.url,"/user/meetings/get_meeting_url?nocache"),{method:"post",body:JSON.stringify({token:z("vibebp").getToken(),id:i.id})}).then((function(e){return e.json()})).then((function(e){if(s(!1),e.hasOwnProperty("message")&&H("vibebp").addNotification({text:e.message}),e.status&&e.url){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);t.meeting_details.join_url=e.url,l(t)}}))};return wp.element.createElement("div",{className:"join_vibebbb"},i.meeting_details?wp.element.createElement(q,null,wp.element.createElement(q,null,i.meeting_details.meeting_id?wp.element.createElement(q,null,wp.element.createElement("div",{className:"join_meeting_details"},e.hasOwnProperty("show_timing")?wp.element.createElement("div",null,wp.element.createElement("ul",{className:"bbb_meeting_details"},wp.element.createElement("li",null,wp.element.createElement("strong",null,window.vibebbb.translations.starts),wp.element.createElement("span",null,new Date(i.meeting_details.start).toLocaleString())),wp.element.createElement("li",null,wp.element.createElement("strong",null,window.vibebbb.translations.ends),wp.element.createElement("span",null,new Date(i.meeting_details.end).toLocaleString())))):""),i.meeting_details.join_url?wp.element.createElement("div",{className:"join_meeting_buttons"},wp.element.createElement("a",{className:n?"button is-primary open_in_same_tab is-loading":"button is-primary open_in_same_tab",href:i.meeting_details.join_url,target:"_blank",onClick:function(){!function(){if(i.meeting_details){r(!0);var e="?post&args=".concat(encodeURIComponent(JSON.stringify({id:i.id})));fetch("".concat(window.vibebbb.api.url,"/user/meetings/record_join_activity").concat(e),{method:"post",body:JSON.stringify({token:z("vibebp").getToken(),id:i.id})}).then((function(e){return e.json()})).then((function(e){r(!1),e.hasOwnProperty("message")&&H("vibebp").addNotification({text:e.message}),e.status}))}}()}},window.vibebbb.translations.open_meeting)):i.meeting_details.can_join?wp.element.createElement("div",null,wp.element.createElement("a",{className:c?"button is-primary is-loading":"button is-primary",onClick:function(){m()}},window.vibebbb.translations.join)):""):"")):"")};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=wp.element,W=V.useState,X=V.useEffect,Y=(V.Fragment,wp.data),Z=(Y.dispatch,Y.select),ee=function(e){var t=K(W(e.id),2),n=t[0],r=(t[1],K(W([]),2)),a=r[0],i=r[1],l=K(W(!1),2),o=l[0],c=l[1];return X((function(){!function(){c(!0);var e="?args=".concat(encodeURIComponent(JSON.stringify({id:n})));fetch("".concat(window.vibebbb.api.url,"/user/meetings/recordings").concat(e),{method:"post",body:JSON.stringify({token:Z("vibebp").getToken(),id:n})}).then((function(e){return e.json()})).then((function(e){c(!1),e.status&&e.data.hasOwnProperty("recording")&&(Array.isArray(e.data.recording)&&e.data.recording.length?i(e.data.recording):e.data.recording.hasOwnProperty("recordID")&&i([e.data.recording]))}))}()}),[]),wp.element.createElement("div",{className:"bbb_meeting_recordings"},Array.isArray(a)&&a.length?a.map((function(e){return wp.element.createElement("div",{className:"meeting_recording"},wp.element.createElement("div",{className:"meeting_recording_header"},wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-timer"})," ",window.vibebbb.translations.starts),wp.element.createElement("span",null,new Date(parseInt(e.startTime)).toLocaleString())),wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-timer"})," ",window.vibebbb.translations.ends),wp.element.createElement("span",null,new Date(parseInt(e.endTime)).toLocaleString()))),wp.element.createElement("div",{className:"meeting_recording_body"},e.playback&&e.playback.format&&e.playback.format.url?wp.element.createElement("a",{className:"button is-primary",href:e.playback.format.url,target:"_blank"},window.vibebbb.translations.view_recording):""))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebbb.translations.no_recordings),o?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=wp.element,ae=(re.createElement,re.useState),ie=re.useEffect,le=re.Fragment,oe=(re.render,re.useContext),ce=wp.data,se=ce.dispatch,me=ce.select,ue=function(e){var t=oe(r),n=me("vibebp").getUser(),a=te(ae(e.meeting),2),i=a[0],l=a[1];ie((function(){l(e.meeting)}),[e.meeting]);return wp.element.createElement(le,null,wp.element.createElement("div",{className:"vibebp_full_meeting_wrapper"},wp.element.createElement("div",{className:"vibebp_meetings_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back}),wp.element.createElement("span",null,wp.element.createElement("span",{className:"meeting_date"},i.post_date),i.post_author===n.id?wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){t.update(i,"edit_meeting_id")}}),wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){var t="?post&args=".concat(encodeURIComponent(JSON.stringify({id:i.id})));fetch("".concat(window.vibebbb.api.url,"/user/meetings/trash").concat(t),{method:"post",body:JSON.stringify({token:me("vibebp").getToken(),id:i.id})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&se("vibebp").addNotification({text:t.message}),t.status&&(e.update("remove",i),e.back())}))}})):"")),wp.element.createElement("h3",{className:"post_title"},i.post_title),wp.element.createElement("div",{className:"vibebp_meeting_content",dangerouslySetInnerHTML:{__html:i.post_content}}),i.meeting_details?wp.element.createElement(G,{meeting:i}):"",i.post_author==n.id||i.meta.hasOwnProperty("show_recordings")&&i.meta.show_recordings?wp.element.createElement(ee,{id:i.id}):""))};function be(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=wp.element,he=(ge.createElement,ge.useState),_e=ge.useEffect,Ee=ge.Fragment,Oe=(ge.render,ge.useContext),je=wp.data,Se=(je.dispatch,je.select),Ne=function(e){var t=Oe(r),n=we(he({scope:Object.keys(window.vibebbb.shared_tabs)[0],type:e.type,paged:1,s:"",orderby:"date",order:"DESC"}),2),a=n[0],i=n[1],l=we(he(pe({},a)),2),o=(l[0],l[1],we(he(!1),2)),c=o[0],s=o[1],m=we(he(!1),2),u=m[0],b=m[1],d=we(he([]),2),p=d[0],f=d[1],w=we(he(!0),2),v=w[0],h=w[1],_=we(he(null),2),E=_[0],O=_[1];_e((function(){f(t.meetings)}),[t.meetings]),_e((function(){i(pe(pe({},a),{},{type:e.type,s:"",paged:1}))}),[e.type]);var j=function(){i(pe(pe({},a),{},{s:""}))};_e((function(){return document.addEventListener("vibebp_component_reload",j),function(){document.removeEventListener("vibebp_component_reload",j)}})),g((function(){E&&E.abort();var e=new AbortController,n=E?{signal:e.signal}:{};O(e);var r=pe({},a);"mine"===r.type&&delete r.scope;var i=r.s.length?"?nocache":"?args=".concat(encodeURIComponent(JSON.stringify(pe(pe({},r),{},{s:""})))),l=1==r.paged?[]:be(p);S(l),s(!0),fetch("".concat(window.vibebbb.api.url,"/user/meetings").concat(i),pe(pe({method:"post"},n),{},{body:JSON.stringify(pe(pe({},a),{},{token:Se("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(t.update(!1,"forceReload"),s(!1),e.status){l=1==a.paged?[]:be(p);var n=[].concat(be(l),be(e.meetings));b(n.length<parseInt(e.total)),S(n)}})).catch((function(e){s(!1),"AbortError"===e.name||(O(null),console.error("Uh oh, an error!",e))}))}),500,[a]);var S=function(e){f(e),t.update(e,"set")},N=be(p);return a.s.length&&(N=p.filter((function(e){return e.post_title.toLowerCase().indexOf(a.s.toLowerCase())>-1}))),wp.element.createElement("div",{className:"vibebp_meetings_wrapper"},wp.element.createElement(Ee,null,wp.element.createElement("div",{className:"vibebp_main_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:a.s,onChange:function(e){i(pe(pe({},a),{},{s:e.target.value,paged:1}))},placeholder:window.vibebbb.translations.search_text})),"joined"==e.type?wp.element.createElement("div",{class:"buttons has-addons"},Object.keys(window.vibebbb.shared_tabs).map((function(e){return wp.element.createElement("button",{className:a.scope==e?"button is-success is-selected":"button",onClick:function(t){i(pe(pe({},a),{},{s:"",scope:e,paged:1}))}},window.vibebbb.shared_tabs[e])}))):"",wp.element.createElement("div",null,wp.element.createElement("span",{className:"show_filters",onClick:function(){return h(!v)}},wp.element.createElement("span",{className:v?"vicon vicon-close":"vicon vicon-menu-alt"},window.vibebp.translations.filter)),v?wp.element.createElement(Ee,null,wp.element.createElement("div",{className:"order_sorter"},wp.element.createElement("select",{value:a.orderby,onChange:function(e){i(pe(pe({},a),{},{s:"",orderby:e.target.value,paged:1}))}},Object.keys(window.vibebbb.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebbb.sorters[e])}))),wp.element.createElement("span",null,wp.element.createElement("span",{className:"ASC"==a.order?"vicon vicon-angle-up active":"vicon vicon-angle-up",onClick:function(){i(pe(pe({},a),{},{s:"",order:"ASC"}))}}),wp.element.createElement("span",{className:"DESC"==a.order?"vicon vicon-angle-down active":"vicon vicon-angle-down",onClick:function(){i(pe(pe({},a),{},{s:"",order:"DESC"}))}})))):"")),N&&N.length?wp.element.createElement(Ee,null,wp.element.createElement("div",{className:"vibebp_bbb_meetings"},N.map((function(e){var n=Date.now(),r=(e.meeting_details.start-n)/1e3,a="";return a=n>=e.meeting_details.start&&n<=e.meeting_details.end?"running":n<e.meeting_details.start?"upcoming_meeting":"meeting_over",wp.element.createElement("div",{className:"vibebp_bbb_meeting",onClick:function(){t.update(e,"show_meeting_id")}},wp.element.createElement("div",null,wp.element.createElement("span",{className:a},"running"==a?window.vibebbb.translations.meeting_running:"meeting_over"==a?window.vibebbb.translations.meeting_over:r>86400?Math.floor(r/86400)+window.vibebbb.translations.days:r>3600?Math.floor(r/3600)+window.vibebbb.translations.hours:r>60?Math.floor(r/60)+window.vibebbb.translations.minutes:Math.floor(r)+window.vibebbb.translations.seconds),wp.element.createElement("h3",null,e.post_title),e.meeting_details?wp.element.createElement("div",{className:"meeting_details"},e.meeting_details.start?wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(e.meeting_details.start).toLocaleString()))):"",e.meeting_details.end?wp.element.createElement("span",null,wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-calendar"}),wp.element.createElement("span",null,new Date(e.meeting_details.end).toLocaleString()))):""):""),wp.element.createElement("div",{className:"vibebp_meeting_members"},wp.element.createElement(y,{type:"user",id:{user_id:e.post_author},not_show_name:!0})))}))),u?wp.element.createElement("a",{className:"link",onClick:function(){i(pe(pe({},a),{},{paged:a.paged+1}))}},window.vibebbb.translations.load_more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebbb.translations.no_bbbs),c?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""))};function ke(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=wp.element,Ue=(Te.createElement,Te.useState),Me=Te.useEffect,Le=(Te.Fragment,Te.render,Te.useContext,wp.data),Je=(Le.dispatch,Le.select),Re=function(e){var t=Ie(Ue({}),2),n=(t[0],t[1],Ie(Ue(!0),2)),a=n[0],i=n[1],l=Ie(Ue(!1),2),o=l[0],c=l[1],s=Je("vibebp").getUser(),m=Ie(Ue([]),2),u=m[0],b=m[1],d=Ie(Ue([]),2),p=d[0],f=d[1],w=Ie(Ue(!1),2),v=w[0],y=w[1],g=Ie(Ue([]),2),h=g[0],_=g[1],E=Ie(Ue(!1),2),O=E[0],j=E[1],S=Ie(Ue(!1),2),N=S[0],k=S[1],A=window.vibebbb.settings.editor_slug,P=s.caps.hasOwnProperty(window.vibebbb.settings.new_vibebbb_cap);Me((function(){var e=Je("vibebp").getMenu().filter((function(e){return"bbb_meeting"===e.parent})).filter((function(e){return!!P||-1==A.indexOf(e.slug)}));if(e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),b(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar"),"view"==Je("vibebp").getAction()||"shared"==Je("vibebp").getAction()){var t=Je("vibebp").getAction();"view"==t&&(t="shared"),y(t)}}),[]),Me((function(){if(h&&h.length&&Je("vibebp").getId()&&a){var e=Je("vibebp").getId();h.findIndex((function(t){return t.id==e}))>-1&&(C(h[h.findIndex((function(t){return t.id==e}))],"show_meeting_id"),i(!1))}}),[h,a]);var C=function(e,t){var n=ke(h),r=-1;switch(t){case"add":n.push(e),_(n);break;case"update":(r=n.findIndex((function(t){return t.id==e.id})))>=0&&(n.splice(r,1,e),_(n));break;case"forceReload":c(t);break;case"set":_(e);break;case"show_meeting_id":(r=n.findIndex((function(t){return parseInt(t.id)==parseInt(e.id)})))>=0&&(j(!1),k(n[r]));break;case"edit_meeting_id":(r=n.findIndex((function(t){return parseInt(t.id)==parseInt(e.id)})))>=0&&(k(!1),j(n[r]))}};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebbb.label),P?wp.element.createElement("a",{className:"button is-primary new_mail",onClick:function(){j(!0)}},window.vibebbb.translations.create_bbb):"",u.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:n,onClick:function(n){var r=Pe({},p);r.filter=e.css_id,r.page=1,p.css_id!==r.filter&&f(r),y(e.css_id);var a=ke(u),i=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),b(a)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement(r.Provider,{value:{meetings:h,forceReload:o,update:C}},N?wp.element.createElement(ue,{meeting:N,back:function(){k(!1)},update:function(e){var t=ke(h);t.splice(t.findIndex((function(t){return t.id==e.id})),1),_(t)}}):O?wp.element.createElement(T,{meeting:O,back:function(){j(!1)},created:function(e){j(!1)}}):"my_meetings"===v?wp.element.createElement(Ne,{type:"joined"}):"manage_bbb"===v?wp.element.createElement(Ne,{type:"mine"}):wp.element.createElement(Ne,{type:"joined"}))))};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=wp.element,Be=(qe.createElement,qe.render),He=(qe.useState,qe.useEffect,qe.Fragment);qe.useContext;document.addEventListener("component_loaded",(function(e){"bbb_meeting"===e.detail.component&&setTimeout((function(){Be(wp.element.createElement(Re,{field:e.detail}),document.querySelector("#bbb_meeting_component"))}),200)}),!1),document.addEventListener("unit_loaded",(function(e){if(e.detail.hasOwnProperty("coursestatus")){if(document.querySelectorAll(".vibe_bbb_unit"))for(var t=document.querySelectorAll(".vibe_bbb_unit"),n=t.length-1;n>=0;n--)t[n].remove();var r=e.detail.coursestatus;if(r.hasOwnProperty("courseitems")&&Array.isArray(r.courseitems)&&r.courseitems.length&&r.hasOwnProperty("current_unit_key")){var a=r.courseitems[r.current_unit_key];if(a.hasOwnProperty("id")&&"unit"==a.type&&a.hasOwnProperty("meta")&&a.meta.hasOwnProperty("unit_type")&&"wplms_bbb"==a.meta.unit_type&&a.meta.hasOwnProperty("bbb")&&a.meta.bbb){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.meta.bbb);setTimeout((function(){var e=document.querySelector(".unit"+a.id);if(e){var t=document.createElement("div");t.setAttribute("id","unit_bbb_"+a.id),t.classList.add("vibe_bbb_unit"),e.appendChild(t)}var n=document.getElementById("unit_bbb_"+a.id);n&&Be(wp.element.createElement(He,null,wp.element.createElement(G,{meeting:i,show_timing:!0}),i.meta.hasOwnProperty("show_recordings")&&i.meta.show_recordings?wp.element.createElement(ee,{id:i.id}):""),n)}),200)}}}}),!1)}]);